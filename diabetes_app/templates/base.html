{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Diabetes Predictor{% endblock %}</title>

  <style>
    body {
      background-color: #F5F5F5;
      color: #003366;
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
    }

    header h1 {
      padding: 14px 0px 10px 20px;
      margin: 0;
    }

    header {
      width: 100%;
      background-color: #001F3F;
      color: #c19a6b;
    }
    .B1 {
        margin-top: 10px;
        margin-left: 57rem;
        padding: 8px;
        background: #ffffff;
        border: none;
        border-radius: 6px;
        font-size: 18px;
        cursor: pointer;
    }

    .B1:hover {
        background: #ffffffd7;
    }

    p {
      text-align: center;
    }

    footer {
      padding: 20px 0;
      text-align: center;
      background-color: #001F3F;
      color: #c19a6b;
      margin-top: 40px;
    }
  </style>

  {% block css %}{% endblock %}
</head>
{# Paste this into your base.html just inside the <body> tag so all pages inherit toasts #}

<!-- Toast container -->

<div id="toast-container" aria-live="polite" aria-atomic="true"></div>

{% if messages %}

  <div id="django-messages" style="display:none;">
    {% for message in messages %}
      <div class="dj-msg" data-tags="{{ message.tags }}">{{ message }}</div>
    {% endfor %}
  </div>
{% endif %}

<style>
#toast-container {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 10px;
    pointer-events: none;
}
.toast {
    pointer-events: auto;
    min-width: 260px;
    max-width: 420px;
    padding: 12px 16px;
    border-radius: 8px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
    color: #001f3f;
    background: #ffffff;
}
.toast.success { border-left: 6px solid #C19A6B; }
.toast.error { border-left: 6px solid #e74c3c; }
.toast.warning { border-left: 6px solid #f39c12; }
.toast.info { border-left: 6px solid #3498db; }

.toast .close {
    margin-left: 12px;
    cursor: pointer;
    font-weight: 700;
    background: transparent;
    border: none;
    font-size: 18px;
    color: inherit;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const container = document.getElementById('toast-container');
  const messagesDiv = document.getElementById('django-messages');
  if (!container || !messagesDiv) return;

  const msgs = messagesDiv.querySelectorAll('.dj-msg');
  msgs.forEach(function(m, idx) {
    const tags = (m.dataset.tags || 'info').split(' ')[0];
    const text = m.textContent.trim();
    const toast = document.createElement('div');
    toast.className = 'toast ' + tags;
    toast.innerHTML = '<div class="text">' + text + '</div><button class="close" aria-label="close">&times;</button>';
    container.appendChild(toast);

    // close handler
    toast.querySelector('.close').addEventListener('click', function() {
      toast.remove();
    });

    // auto-dismiss
    setTimeout(function() {
      if (toast.parentNode) toast.remove();
    }, 6000 + idx * 200);
  });
});
</script>

<body>

  <header>
  <h1> 
  <a href="{% url 'index' %}" style="text-decoration:none; color:#C19A6B; font-size:28px; font-weight:bold;">Diabetes Risk Prediction</a>
    {% if user.is_authenticated %}
    <button type="submit" class="B1"><a href="{% url 'logout' %}" style="color:#C19A6B;">Logout</a></button>
    {% endif %}
  </h1>

    <hr>
  </header>

  <main>
    {% block content %}{% endblock %}
  </main>

  <footer>
    <p>&copy; 2025 Diabetes Predictor</p>
  </footer>

</body>

</html>